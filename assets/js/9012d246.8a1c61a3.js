"use strict";(self.webpackChunkhktech=self.webpackChunkhktech||[]).push([[5561],{1984:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var a=i(7673),r=i(4848),l=i(8453);const t={title:"\u5be6\u4f5c Vue \u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Java \u5f8c\u7aef\u8655\u7406",description:"\u7c21\u55ae\u5be6\u4f5c Vue \u7684\u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Ajax \u547c\u53eb Java \u5f8c\u7aef API \u4f86\u8655\u7406\u4e0a\u50b3\u7684\u6a94\u6848\u5167\u5bb9",slug:"vue-drag-file-upload",authors:"hkchen",tags:["vue","javascript","java","spring","file-upload","drag-drop","ajax","axios"],hide_table_of_contents:!1,date:new Date("2019-02-26T00:00:00.000Z")},o=void 0,s={authorsImageUrls:[void 0]},d=[{value:"\u524d\u7aef Demo",id:"\u524d\u7aef-demo",level:2},{value:"CSS \u6a23\u5f0f",id:"css-\u6a23\u5f0f",level:3},{value:"HTML \u7d50\u69cb",id:"html-\u7d50\u69cb",level:3},{value:"JavaScript \u5be6\u4f5c",id:"javascript-\u5be6\u4f5c",level:3},{value:"\u5f8c\u7aef Java \u90e8\u5206",id:"\u5f8c\u7aef-java-\u90e8\u5206",level:2},{value:"Configuration multipartResolver",id:"configuration-multipartresolver",level:3},{value:"Controller \u5be6\u4f5c",id:"controller-\u5be6\u4f5c",level:3},{value:"Service \u5be6\u4f5c",id:"service-\u5be6\u4f5c",level:3},{value:"\u6e2c\u8a66\u7d50\u679c",id:"\u6e2c\u8a66\u7d50\u679c",level:2},{value:"\u6e2c\u8a66\u8f38\u5165",id:"\u6e2c\u8a66\u8f38\u5165",level:3},{value:"Log \u7d50\u679c",id:"log-\u7d50\u679c",level:3},{value:"\u6ce8\u610f\u4e8b\u9805",id:"\u6ce8\u610f\u4e8b\u9805",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\u7c21\u55ae\u5be6\u4f5c ",(0,r.jsx)(n.strong,{children:"Vue"})," \u7684\u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e ",(0,r.jsx)(n.strong,{children:"Ajax"})," \u547c\u53eb ",(0,r.jsx)(n.strong,{children:"Java"})," \u5f8c\u7aef ",(0,r.jsx)(n.strong,{children:"API"})," \u4f86\u8655\u7406\u4e0a\u50b3\u7684\u6a94\u6848\u5167\u5bb9\uff0c\u5f8c\u7aef\u7684\u90e8\u4efd\u56e0\u70ba ",(0,r.jsx)(n.strong,{children:"Server"})," \u554f\u984c\uff0c\u50c5\u7559\u5f8c\u7aef\u7a0b\u5f0f\u78bc\u3001\u6ce8\u610f\u4e8b\u9805\u548c\u622a\u5716\u7d50\u679c\u5448\u73fe\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Demo"})," \u4ee5\u53ca ",(0,r.jsx)(n.strong,{children:"CodePen"})," \u90e8\u5206\u7686\u53ea\u5448\u73fe\u524d\u7aef\u9801\u9762\u7684\u90e8\u4efd\u4e26\u4f7f\u7528 ",(0,r.jsx)(n.strong,{children:"CDN"})," \u7684\u65b9\u5f0f\u5f15\u5165\uff0c\u800c ",(0,r.jsx)(n.strong,{children:"CodePen"})," \u6709\u4f7f\u7528 ",(0,r.jsx)(n.strong,{children:"Bootstrap"})," \u7684\u6309\u9215\uff0c\u4e0a\u50b3 ",(0,r.jsx)(n.strong,{children:"icon"})," \u5247\u662f ",(0,r.jsx)(n.strong,{children:"FontAwesome"}),"\uff0c\u6709\u9700\u8981\u8acb\u81ea\u884c\u5f15\u5165\uff01"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5\u4e0b\u70ba\u524d\u7aef\u9801\u9762\u62d6\u62c9\u6a94\u6848\u6216\u9ede\u64ca\u4e0a\u50b3\u7684\u90e8\u4efd\uff0c\u4e0a\u50b3\u5f8c\u53ef\u4ee5\u5206\u6790\u51fa\u6a94\u6848\u7684\u4e00\u4e9b\u8cc7\u8a0a\uff0c\u4e0a\u50b3\u5b8c\u5f8c\u4e5f\u6703\u51fa\u73fe\u522a\u9664\u6a94\u6848\u7684\u6309\u9215\u3002\u800c\u7bc4\u4f8b\u7684 ",(0,r.jsx)(n.strong,{children:"code"})," \u6703\u52a0\u4e0a\u547c\u53eb\u5f8c\u7aef ",(0,r.jsx)(n.strong,{children:"API"})," \u7684\u6bb5\u843d\u4e26\u5229\u7528 ",(0,r.jsx)(n.strong,{children:"axios"})," \u4f86\u547c\u53eb\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u524d\u7aef-demo",children:"\u524d\u7aef Demo"}),"\n",(0,r.jsxs)(n.p,{children:["\u524d\u5f80 ",(0,r.jsx)(n.a,{href:"https://codepen.io/hkchen/pen/EraZXm",children:"CodePen"})," \u89c0\u770b\u5b8c\u6574 Demo"]}),"\n",(0,r.jsx)(n.h3,{id:"css-\u6a23\u5f0f",children:"CSS \u6a23\u5f0f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:".dropZone {\n  height: 200px;\n  position: relative;\n  border: 2px dashed #eee;\n}\n\n.dropZone:hover {\n  border: 2px solid #2e94c4;\n}\n\n.dropZone:hover .dropZone-title {\n  color: #1975A0;\n}\n\n.dropZone-info {\n  color: #A8A8A8;\n  position: absolute;\n  top: 50%;\n  width: 100%;\n  transform: translate(0, -50%);\n  text-align: center;\n}\n\n.dropZone-title {\n  color: #787878;\n}\n\n.dropZone input {\n  position: absolute;\n  cursor: pointer;\n  top: 0px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n}\n\n.dropZone-upload-limit-info {\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n}\n\n.dropZone-over {\n  background: #5C5C5C !important;\n  opacity: 0.8;\n  border: 2px solid #2e94c4;\n}\n\n.dropZone-uploaded {\n  height: 200px;\n  position: relative;\n  border: 2px dashed #eee;\n}\n\n.dropZone-uploaded-info {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #A8A8A8;\n  position: absolute;\n  top: 50%;\n  width: 100%;\n  transform: translate(0, -50%);\n  text-align: center;\n}\n\n.removeFile {\n  width: 200px;\n}\n\n.btn-primary {\n  color: #fff;\n  background-color: #1170C8;\n  border-radius: 5px;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"html-\u7d50\u69cb",children:"HTML \u7d50\u69cb"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div id="app">\n  <div v-if="!file">\n    <div :class="[\'dropZone\', dragging ? \'dropZone-over\' : \'\']" \n         @dragestart="dragging = true" \n         @dragenter="dragging = true" \n         @dragleave="dragging = false">\n      <div class="dropZone-info" @drag="onChange">\n        \x3c!-- font-awesome upload icon --\x3e\n        <span class="fa fa-cloud-upload dropZone-title"></span>\n        <span class="dropZone-title">Drop file or click to upload</span>\n        <div class="dropZone-upload-limit-info">\n          <div>extension support: txt</div>\n          <div>maximum file size: 5 MB</div>\n        </div>\n      </div>\n      <input type="file" @change="onChange">\n    </div>\n  </div>\n  \n  <div v-else class="dropZone-uploaded">\n    <div class="dropZone-uploaded-info">\n      <span class="dropZone-title">Uploaded</span>\n      <button type="button" \n              class="btn btn-primary removeFile" \n              @click="removeFile">\n        Remove File\n      </button>\n    </div>\n  </div>\n  \n  <div class="uploadedFile-info">\n    <div>fileName: {{ file.name }}</div>\n    <div>fileSize(bytes): {{ file.size }}</div>\n    <div>extension\uff1a{{ extension }}</div>\n  </div>\n</div>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"javascript-\u5be6\u4f5c",children:"JavaScript \u5be6\u4f5c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script src="https://unpkg.com/vue@2.5.22/dist/vue.js"><\/script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"><\/script>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"var app = new Vue({\n  el: '#app',\n  data() {\n    return {\n      file: '',\n      dragging: false\n    }\n  },\n  methods: {\n    onChange(e) {\n      // \u5224\u65b7\u62d6\u62c9\u4e0a\u50b3\u6216\u9ede\u64ca\u4e0a\u50b3\u7684 event\n      var files = e.target.files || e.dataTransfer.files;\n      \n      // \u9810\u9632\u6a94\u6848\u70ba\u7a7a\u6a94\n      if (!files.length) {\n        this.dragging = false;\n        return;\n      }\n      \n      this.createFile(files[0]);\n    },\n    \n    createFile(file) {\n      // \u9644\u6a94\u540d\u5224\u65b7\n      if (!file.type.match('text.*')) {\n        alert('please select txt file');\n        this.dragging = false;\n        return;\n      }\n      \n      // \u6a94\u6848\u5927\u5c0f\u5224\u65b7\n      if (file.size > 5000000) {\n        alert('please check file size no more than 5 MB');\n        this.dragging = false;\n        return;\n      }\n      \n      this.file = file;\n      this.dragging = false;\n      \n      // axios post \u7684 url \u8a18\u5f97\u66f4\u63db\u4f60\u81ea\u5df1\u7684 api url\n      let json = new FormData();\n      json.append('uploadFile', this.file);\n      \n      axios.post('http://localhost:8080/uploadFile', json, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(res => {\n        if (res.data !== null && res.data.length > 1) {\n          console.log(res.data);\n        }\n      });\n    },\n    \n    removeFile() {\n      this.file = '';\n    }\n  },\n  \n  computed: {\n    // \u524d\u7aef\u64f7\u53d6\u9644\u6a94\u540d\n    extension() {\n      return (this.file) ? this.file.name.split('.').pop() : '';\n    }\n  }\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5f8c\u7aef-java-\u90e8\u5206",children:"\u5f8c\u7aef Java \u90e8\u5206"}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5 ",(0,r.jsx)(n.strong,{children:"SpringMVC"})," \u70ba\u4f8b\u5b50\uff1a"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-multipartresolver",children:"Configuration multipartResolver"}),"\n",(0,r.jsx)(n.admonition,{title:"\u91cd\u8981\u914d\u7f6e",type:"danger",children:(0,r.jsxs)(n.p,{children:["\u5982\u679c\u6c92\u6709\u8a2d\u5b9a\u6703\u5674 ",(0,r.jsx)(n.strong,{children:"error log"}),"\uff01"]})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"applicationContext-webapp.xml"})," \u5e95\u4e0b\u6dfb\u52a0\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- for <form ... enctype="multipart/form-data" /> --\x3e\n<bean id="multipartResolver" \n      class="org.springframework.web.multipart.commons.CommonsMultipartResolver">\n  \x3c!-- The maximum file size in bytes --\x3e\n  <property name="maxUploadSize" value="5000000" />\n</bean>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"controller-\u5be6\u4f5c",children:"Controller \u5be6\u4f5c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Autowired \nFileService fileService;\n\n@PostMapping("uploadFile")\n@ResponseBody\npublic String searchSimilarDocumentByDocument(@RequestParam("uploadFile") MultipartFile file) {\n    return fileService.txtToString(file);\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"service-\u5be6\u4f5c",children:"Service \u5be6\u4f5c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public static String txtToString(MultipartFile file) throws IOException {\n    return new String(file.getBytes(), "UTF-8").trim();\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6e2c\u8a66\u7d50\u679c",children:"\u6e2c\u8a66\u7d50\u679c"}),"\n",(0,r.jsx)(n.h3,{id:"\u6e2c\u8a66\u8f38\u5165",children:"\u6e2c\u8a66\u8f38\u5165"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6a94\u6848\u540d\u7a31"}),": test.txt"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6a94\u6848\u5167\u5bb9"}),": \u6e2c\u8a66\u6587\u4ef6"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u6e2c\u8a66\u8f38\u5165",src:i(2831).A+"",width:"858",height:"180"})}),"\n",(0,r.jsx)(n.h3,{id:"log-\u7d50\u679c",children:"Log \u7d50\u679c"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Log \u7d50\u679c",src:i(9216).A+"",width:"1630",height:"102"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6ce8\u610f\u4e8b\u9805",children:"\u6ce8\u610f\u4e8b\u9805"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Code"})," \u90fd\u662f\u7c21\u55ae\u7684\u7bc4\u4f8b\u61c9\u7528\uff0c\u7919\u65bc ",(0,r.jsx)(n.strong,{children:"server"})," \u7de3\u6545\uff0c\u5f8c\u7aef\u7684\u5be6\u4f5c\u57fa\u672c\u4e0a\u5c31\u662f\u8cbc\u91cd\u8981\u7684 ",(0,r.jsx)(n.strong,{children:"code"})," \u548c\u64f7\u53d6\u7d50\u679c\uff0c\u4e4b\u5f8c\u524d\u7aef\u5229\u7528 ",(0,r.jsx)(n.strong,{children:"axios"})," \u63a5\u6536\u5230\u525b\u525b\u7684\u7d50\u679c\u5728\u770b\u8981\u600e\u9ebc\u53bb\u8655\u7406\u50cf\u662f\u8f38\u51fa\u7684\u67d0\u4e9b\u5730\u65b9\u4e4b\u985e\u7684\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u800c\u771f\u5be6\u4f7f\u7528\u7684\u6642\u5019\u4e00\u4e9b\u4f8b\u5916\u8655\u7406\u9084\u6709\u526f\u6a94\u540d\u524d\u5f8c\u7aef\u8655\u7406\uff0c\u6700\u5f8c\u524d\u7aef\u8981\u53d6\u7684\u4ec0\u9ebc\u8a0a\u606f\u6216\u932f\u8aa4\u8a0a\u606f\u90fd\u5f97\u8a18\u5f97\u88dc\u4e0a\u54e6\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},2831:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/01-7c78e214e1be48d956d9eb73d1fbdce8.jpg"},7673:e=>{e.exports=JSON.parse('{"permalink":"/blog/vue-drag-file-upload","source":"@site/blog/2019-02-26-vue-drag-file-upload/index.md","title":"\u5be6\u4f5c Vue \u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Java \u5f8c\u7aef\u8655\u7406","description":"\u7c21\u55ae\u5be6\u4f5c Vue \u7684\u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Ajax \u547c\u53eb Java \u5f8c\u7aef API \u4f86\u8655\u7406\u4e0a\u50b3\u7684\u6a94\u6848\u5167\u5bb9","date":"2019-02-26T00:00:00.000Z","tags":[{"inline":false,"label":"Vue.js","permalink":"/blog/tags/vue","description":"Vue.js framework and development"},{"inline":false,"label":"JavaScript","permalink":"/blog/tags/javascript","description":"JavaScript programming language"},{"inline":false,"label":"Java","permalink":"/blog/tags/java","description":"Java programming and technologies"},{"inline":false,"label":"Spring","permalink":"/blog/tags/spring","description":"Spring Framework and Spring Boot"},{"inline":false,"label":"File Upload","permalink":"/blog/tags/file-upload","description":"File upload implementations and techniques"},{"inline":false,"label":"Drag & Drop","permalink":"/blog/tags/drag-drop","description":"Drag and drop functionality"},{"inline":false,"label":"AJAX","permalink":"/blog/tags/ajax","description":"Asynchronous JavaScript and XML"},{"inline":false,"label":"Axios","permalink":"/blog/tags/axios","description":"Promise-based HTTP client for JavaScript"}],"readingTime":3.72,"hasTruncateMarker":true,"authors":[{"name":"HK Chen","title":"Cloud Engineer","url":"https://blog.hkchen.tech/","page":{"permalink":"/blog/authors/hkchen"},"socials":{"github":"https://github.com/hkchen"},"imageURL":"/img/hktech-joker-avatar.svg","key":"hkchen"}],"frontMatter":{"title":"\u5be6\u4f5c Vue \u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Java \u5f8c\u7aef\u8655\u7406","description":"\u7c21\u55ae\u5be6\u4f5c Vue \u7684\u62d6\u62c9\u6a94\u6848\u4e0a\u50b3\u4e26\u900f\u904e Ajax \u547c\u53eb Java \u5f8c\u7aef API \u4f86\u8655\u7406\u4e0a\u50b3\u7684\u6a94\u6848\u5167\u5bb9","slug":"vue-drag-file-upload","authors":"hkchen","tags":["vue","javascript","java","spring","file-upload","drag-drop","ajax","axios"],"hide_table_of_contents":false,"date":"2019-02-26T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"\u5b89\u88dd JMX \u7ba1\u7406 Tomcat 9 \u4e26\u900f\u904e Zabbix 4 \u76e3\u63a7","permalink":"/blog/tomcat9-jmx-zabbix"}}')},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var a=i(6540);const r={},l=a.createContext(r);function t(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(l.Provider,{value:n},e.children)}},9216:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/02-a0c3eaa3c29cf8f1a9e8ff28ab6d4a27.jpg"}}]);